---
import { OrderList } from '@/components/orders/OrderList'
import DashboardLayout from '@/layouts/DashboardLayout.astro'
import type { OrderWithItems } from '@/lib/scoped-queries'

// Mock data for demonstration
// In production, this would come from the database via an API endpoint
const mockOrders: OrderWithItems[] = [
	{
		id: 'ord_1234567890abcdef',
		account_id: 'acc_demo',
		created_by_user_id: 'user_alice',
		assigned_to_person_id: 'person_bob',
		status: 'shipped',
		payment_method: 'card',
		subtotal: 2499.0,
		shipping_cost: 0,
		tax_amount: 224.91,
		total: 2723.91,
		tracking_number: '1Z999AA10123456784',
		carrier: 'UPS',
		estimated_delivery: '2025-12-15',
		created_at: '2025-12-01T10:30:00Z',
		creator_name: 'Alice Johnson',
		assignee_name: 'Bob Smith',
		items: [
			{
				id: 'item_1',
				order_id: 'ord_1234567890abcdef',
				product_name: 'MacBook Pro 14" M4',
				product_sku: 'MBP-14-M4-16-512',
				quantity: 1,
				unit_price: 2499.0,
				total_price: 2499.0,
			},
		],
	},
	{
		id: 'ord_2345678901bcdefg',
		account_id: 'acc_demo',
		created_by_user_id: 'user_alice',
		status: 'pending_leasing_approval',
		payment_method: 'leasing',
		subtotal: 4998.0,
		shipping_cost: 0,
		tax_amount: 449.82,
		total: 5447.82,
		monthly_cost: 226.16,
		created_at: '2025-12-05T14:22:00Z',
		creator_name: 'Alice Johnson',
		items: [
			{
				id: 'item_2',
				order_id: 'ord_2345678901bcdefg',
				product_name: 'MacBook Pro 14" M4',
				product_sku: 'MBP-14-M4-16-512',
				quantity: 2,
				unit_price: 2499.0,
				monthly_price: 113.08,
				total_price: 4998.0,
			},
		],
	},
	{
		id: 'ord_3456789012cdefgh',
		account_id: 'acc_demo',
		created_by_user_id: 'user_carol',
		assigned_to_person_id: 'person_david',
		status: 'delivered',
		payment_method: 'card',
		subtotal: 1599.0,
		shipping_cost: 0,
		tax_amount: 143.91,
		total: 1742.91,
		tracking_number: '1Z999AA10123456785',
		carrier: 'UPS',
		delivered_at: '2025-11-28T16:45:00Z',
		created_at: '2025-11-20T09:15:00Z',
		creator_name: 'Carol Williams',
		assignee_name: 'David Lee',
		items: [
			{
				id: 'item_3',
				order_id: 'ord_3456789012cdefgh',
				product_name: 'iPad Pro 11" M4',
				product_sku: 'IPAD-11-M4-256',
				quantity: 1,
				unit_price: 1599.0,
				total_price: 1599.0,
			},
		],
	},
	{
		id: 'ord_4567890123defghi',
		account_id: 'acc_demo',
		created_by_user_id: 'user_alice',
		status: 'processing',
		payment_method: 'card',
		subtotal: 529.0,
		shipping_cost: 15.0,
		tax_amount: 48.96,
		total: 592.96,
		created_at: '2025-12-07T11:00:00Z',
		creator_name: 'Alice Johnson',
		items: [
			{
				id: 'item_4',
				order_id: 'ord_4567890123defghi',
				product_name: 'AirPods Pro (2nd gen)',
				product_sku: 'AIRPODS-PRO-2',
				quantity: 2,
				unit_price: 249.0,
				total_price: 498.0,
			},
			{
				id: 'item_5',
				order_id: 'ord_4567890123defghi',
				product_name: 'Magic Keyboard',
				product_sku: 'MK-TOUCH-ID',
				quantity: 1,
				unit_price: 149.0,
				total_price: 149.0,
			},
		],
	},
]
---

<DashboardLayout title="Orders">
	<div class="space-y-6">
		<div>
			<h1 class="text-3xl font-bold text-foreground">Orders</h1>
			<p class="text-muted-foreground mt-2">View and manage all orders for your team</p>
		</div>

		<OrderList orders={mockOrders} client:only="react" />
	</div>
</DashboardLayout>
